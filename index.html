<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جمعية تبيان لخدمة ضيوف الرحمن - الرئيسية</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="theme.css">
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Database Configuration and Service -->
    <script src="db-config.js"></script>
    <script src="database-service.js"></script>
        <style>
        :root {
            --color-primary: #0f5a4a;   /* logo deep green */
            --color-accent:  #a07a47;   /* logo gold/brown */
            --color-bg:      #f5f7f6;   /* very light neutral */
            --color-surface: #ffffff;   /* cards/sections */
            --color-text:    #1f2937;   /* default text */
            --color-muted:   #6b7280;   /* secondary text/borders */
        }

        /* Brand utility classes */
        .bg-primary { background-color: var(--color-primary) !important; }
        .text-primary { color: var(--color-primary) !important; }
        .border-primary { border-color: var(--color-primary) !important; }
        .bg-surface { background-color: var(--color-surface) !important; }
        .text-accent { color: var(--color-accent) !important; }
        .bg-accent { background-color: var(--color-accent) !important; }
        .text-muted { color: var(--color-muted) !important; }
    .hover\:bg-primary:hover { background-color: var(--color-primary) !important; }
    .hover\:bg-accent:hover { background-color: var(--color-accent) !important; }
    .hover\:text-accent:hover { color: var(--color-accent) !important; }

        .btn-accent {
            background-color: var(--color-accent);
            color: #0b111a;
            box-shadow: 0 6px 16px rgba(160,122,71,0.25);
        }
        .btn-accent:hover { filter: brightness(0.95); }
        .btn-accent:focus-visible { outline: 3px solid var(--color-primary); outline-offset: 2px; }

        /* Map legacy inline Tailwind color classes to new palette (non-breaking) */
        .text-\[\#6e1948\] { color: var(--color-primary) !important; }
        .hover\:text-\[\#6e1948\]:hover { color: var(--color-primary) !important; }
    .hover\:bg-\[\#6e1948\]\/10:hover { background-color: color-mix(in srgb, var(--color-primary) 10%, transparent) !important; }
    .hover\:bg-\[\#6e1948\]\/5:hover { background-color: color-mix(in srgb, var(--color-primary) 5%, transparent) !important; }
    .hover\:border-\[\#6e1948\]\/20:hover { border-color: color-mix(in srgb, var(--color-primary) 20%, transparent) !important; }
        .bg-\[\#6e1948\] { background-color: var(--color-primary) !important; }
        .text-\[\#efb740\], .text-\[\#EFB740\] { color: var(--color-accent) !important; }
        .text-\[\#432d17\] { color: var(--color-primary) !important; }
        .bg-\[\#00a17d\] { background-color: var(--color-primary) !important; }
        .hover\:bg-\[\#00a17d\]\/80:hover { background-color: color-mix(in srgb, var(--color-primary) 80%, transparent) !important; }
    .hover\:text-\[\#00c59e\]:hover { color: var(--color-primary) !important; }

    /* Neutral mappings to brand tokens */
    .text-gray-700 { color: var(--color-text) !important; }
    .text-gray-600, .text-gray-500 { color: var(--color-muted) !important; }
    .bg-white { background-color: var(--color-surface) !important; }
    .bg-gray-50 { background-color: var(--color-bg) !important; }
    .border-gray-200 { border-color: color-mix(in srgb, var(--color-muted) 30%, transparent) !important; }
        @font-face {
            font-family: 'IBMPlexSansArabic';
            src: url('fonts/IBMPlexSansArabic-Regular.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'IBMPlexSansArabic';
            src: url('fonts/IBMPlexSansArabic-Medium.ttf') format('truetype');
            font-weight: 500;
            font-style: normal;
            font-display: swap;
        }
        
        body, button, input, textarea, select {
            font-family: 'IBMPlexSansArabic', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            font-weight: 400;
            direction: rtl;
            background-image: url('assets/backgroundRoaad.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-color: var(--color-bg);
            color: var(--color-text);
        }
        
        /* Use medium weight for most UI elements */
        .dropdown-content, nav, button, .font-medium, h1, h2, h3, h4, h5, h6 {
            font-weight: 500;
        }
        html {
            scroll-behavior: smooth;
        }

        /* Accessible focus styles */
        :focus-visible { outline: 3px solid var(--color-accent); outline-offset: 2px; }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .counter {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
        }
        
        .ticker {
            overflow: hidden;
            white-space: nowrap;
            animation: scroll-rtl 30s linear infinite;
        }
        
        @keyframes scroll-rtl {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .partner-scroll {
            animation: partnerScroll-rtl 15s linear infinite;
        }
        
        @keyframes partnerScroll-rtl {
            0% { transform: translateX(0); }
            100% { transform: translateX(50%); }
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            body { background-attachment: scroll; }
            .partner-scroll {
                animation: partnerScroll-rtl 10s linear infinite;
            }
            
            /* Improve touch targets for mobile */
            button, a, .mobile-dropdown button {
                min-height: 44px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            }
            
            /* Mobile menu improvements */
            #mobile-menu-btn {
                min-width: 48px;
                min-height: 48px;
                display: flex;
                align-items: center;
                justify-content: center;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Mobile dropdown buttons */
            .mobile-dropdown button {
                padding: 1rem;
                width: 100%;
                text-align: right;
                transition: all 0.2s ease;
            }
            
            .mobile-dropdown button:active {
                background-color: rgba(15, 90, 74, 0.1);
                transform: scale(0.98);
            }
            
            /* Mobile menu links */
            .mobile-dropdown-content a, .mobile-menu-link {
                padding: 0.75rem 1rem;
                min-height: 44px;
                display: flex;
                align-items: center;
                transition: all 0.2s ease;
            }
            
            .mobile-dropdown-content a:active, .mobile-menu-link:active {
                background-color: rgba(15, 90, 74, 0.1);
                transform: scale(0.98);
            }
            
            /* Mobile text sizing */
            h1 { font-size: 2rem !important; }
            h2 { font-size: 1.75rem !important; }
            h3 { font-size: 1.25rem !important; }
            
            /* Mobile spacing */
            .py-16 { padding-top: 3rem !important; padding-bottom: 3rem !important; }
            .py-12 { padding-top: 2rem !important; padding-bottom: 2rem !important; }
            
            /* Mobile achievements grid - keep 2 columns */
            .achievements-grid { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
            
            /* Mobile counter sizing */
            .counter { font-size: 2rem !important; }
            
            /* Mobile icons */
            .text-4xl { font-size: 2.5rem !important; }
            
            /* Mobile news cards */
            /* Mobile hero carousel enhanced */
            .carousel-image { 
                object-fit: cover;
                object-position: center;
            }
            
            /* Mobile image responsive enhancements */
            .aspect-\[4\/3\] {
                aspect-ratio: 4/3 !important;
            }
            
            /* Extra responsive scaling for very small screens */
            @media (max-width: 360px) {
                .max-w-sm { max-width: calc(100vw - 3rem) !important; }
            }
            
            /* Mobile news cards */
            .md\\:grid-cols-3 { grid-template-columns: repeat(1, minmax(0, 1fr)) !important; }
            
            /* Mobile footer */
            .md\\:grid-cols-4 { grid-template-columns: repeat(1, minmax(0, 1fr)) !important; }
            
            /* Mobile header height */
            #hdr { height: 120px !important; }
            
            /* Mobile logo sizing (slightly larger on phones) */
            #logo { width: 4rem !important; height: 3.25rem !important; }

            /* Extra padding for mobile contact chips */
            .mobile-phone-contact { padding: 0.4rem 0.75rem !important; border-radius: 0.5rem; }
            
            /* Mobile achievements background: transparent so page background shows through */
            .py-16.bg-black\/30 { background-color: transparent !important; }
        }
        
        /* Tablet optimizations */
        @media (min-width: 769px) and (max-width: 1024px) {
            .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .md\\:grid-cols-3 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .md\\:grid-cols-4 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }
        
        /* Extra small mobile */
        @media (max-width: 480px) {
            .px-4 { padding-left: 1rem !important; padding-right: 1rem !important; }
            
            h2 { font-size: 1.5rem !important; }
            .counter { font-size: 1.75rem !important; }
            .text-4xl { font-size: 2rem !important; }
            
            .curved-underline::after {
                width: min(150px, 60vw) !important;
                height: 3px !important;
                border-radius: 0 0 0 20px !important;
                max-width: calc(100vw - 3rem) !important;
            }
            
            #hdr { height: 100px !important; }
            
            /* Extra small mobile hero */
            .carousel-image { 
                object-fit: cover;
            }
            
            /* Mobile image scaling for small screens */
            .aspect-\[4\/3\] {
                aspect-ratio: 4/3 !important;
                max-width: calc(100vw - 2rem) !important;
            }
            
            /* Stack footer images vertically on very small screens */
            .footer-images { flex-direction: column !important; align-items: center !important; }
        }
        
        /* Landscape mobile optimization */
        @media (max-width: 768px) and (orientation: landscape) {
            .aspect-\[4\/3\] {
                aspect-ratio: 16/9 !important;
                max-width: 400px !important;
            }
        }
        
        /* Ultra-wide screen adjustments */
        @media (max-width: 320px) {
            .aspect-\[4\/3\] {
                aspect-ratio: 1/1 !important;
                max-width: calc(100vw - 1.5rem) !important;
            }
        }
        
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .lightbox.active {
            display: flex;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background: var(--color-surface);
            min-width: 250px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            z-index: 1;
            border-radius: 8px;
            padding: 0.5rem 0;
            top: 100%;
            left: 0;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Navbar link colors aligned to brand */
        header nav a { color: var(--color-text); transition: color .2s ease; }
        header nav a:hover { color: var(--color-primary); }
        .dropdown-content a { color: var(--color-text); }
        .dropdown-content a i { color: var(--color-primary); }
        .dropdown-content a:hover { background-color: color-mix(in srgb, var(--color-primary) 10%, transparent); }
        
        /* Hero carousel styles - New responsive approach */
        .hero-carousel {
            position: relative;
            width: 100%;
            max-width: 1920px;
            margin: 0 auto;
            overflow: hidden;
            display: block;
        }
        
        /* Responsive hero carousel - Clean flexible layout */
        
        /* Large screens */
        @media (min-width: 1200px) {
            .hero-carousel {
                max-width: 1920px;
            }
            .carousel-image {
                max-width: 1920px;
            }
        }
        
        /* Medium screens */
        @media (min-width: 768px) and (max-width: 1199px) {
            .hero-carousel {
                max-width: 100%;
            }
            .carousel-image {
                max-width: 1200px;
            }
        }
        
        /* Mobile */
        @media (max-width: 768px) {
            .hero-carousel {
                max-width: 100%;
            }
        }
        
        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            visibility: hidden;
        }
        
        .hero-slide.active {
            position: relative;
            opacity: 1;
            transform: translateX(0);
            z-index: 1;
            visibility: visible;
        }
        
        .carousel-image {
            width: 100%;
            height: auto;
            max-width: 1920px;
            display: block;
            object-fit: cover;
            object-position: center;
        }
        
        /* Enhanced responsive image handling */
        @media (max-width: 768px) {
            .carousel-image {
                /* Ensure smooth scaling on mobile */
                will-change: transform;
                object-fit: cover;
            }
        }
        
        /* Extra small mobile responsive */
        @media (max-width: 480px) {
            .carousel-image {
                /* Optimize for touch devices */
                -webkit-transform: translateZ(0);
                transform: translateZ(0);
                object-fit: contain;
            }
        }
        
        /* Ensure images scale properly on resize */
        @media (orientation: landscape) {
            .carousel-image {
                object-fit: cover;
            }
        }
        
        @media (orientation: portrait) and (max-width: 768px) {
            .carousel-image {
                object-fit: contain;
            }
        }
        
        /* Ensure controls scale with adaptive carousel */
        .carousel-arrow, .carousel-dots {
            /* Controls will scale proportionally with the carousel */
            position: absolute;
            z-index: 10;
        }
        

        
        .hero-slide.slide-out-left {
            transform: translateX(-100%);
            opacity: 0;
            visibility: hidden;
        }
        
        .hero-slide.slide-out-right {
            transform: translateX(100%);
            opacity: 0;
            visibility: hidden;
        }
        
        
        /* Allow database-injected slides to appear (manual slides remain as fallback) */
        /* Previously we hid non-manual slides; this is now disabled to enable DB-driven carousel */
        /* .hero-carousel > *:not(.carousel-arrow):not(.carousel-dots):not(.manual-slide) { display: none !important; } */
        
        /* Interactive Carousel Controls */
        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            z-index: 10;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .carousel-arrow:hover {
            background: var(--color-primary);
            transform: translateY(-50%) scale(1.1);
        }
        
        .carousel-arrow-prev {
            left: 20px;
        }
        
        .carousel-arrow-next {
            right: 20px;
        }
        
        .carousel-dots {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            z-index: 10;
            padding: 6px 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            /* Prevent container from stretching children */
            flex-wrap: nowrap;
            white-space: nowrap;
        }
        /* Hide arrows and dots (requested) */
        .carousel-arrow,
        .carousel-dots {
            display: none !important;
        }
        
        .carousel-dot {
            width: 12px;
            height: 12px;
            min-width: 12px;
            min-height: 12px;
            max-width: 12px;
            max-height: 12px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.5);
            background: transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
            flex-grow: 0;
            display: block;
            aspect-ratio: 1/1;
            box-sizing: border-box;
        }
        
        .carousel-dot.active {
            background: var(--color-accent);
            border-color: var(--color-accent);
        }
        
        .carousel-dot:hover {
            border-color: var(--color-accent);
            transform: scale(1.2);
        }
        
        /* Ensure dot scaling maintains circular shape */
        .carousel-dot.active,
        .carousel-dot:hover,
        .carousel-dot:active {
            /* Maintain aspect ratio during scaling */
            transform-origin: center;
        }
        
        /* Mobile responsive controls */
        @media (max-width: 768px) {
            .hero-carousel {
                max-width: 100%;
            }
            
            .carousel-image {
                max-width: 768px;
            }
            
            .carousel-arrow {
                width: 40px;
                height: 40px;
                font-size: 14px;
                backdrop-filter: blur(15px);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            }
            
            .carousel-arrow-prev {
                left: 12px;
            }
            
            .carousel-arrow-next {
                right: 12px;
            }
            
            .carousel-dots {
                bottom: 12px;
                gap: 8px;
                padding: 6px 12px;
                background: rgba(0, 0, 0, 0.4);
                border-radius: 15px;
                backdrop-filter: blur(10px);
                display: flex;
                align-items: center;
                justify-content: center;
                flex-wrap: nowrap;
                white-space: nowrap;
            }
            
            .carousel-dot {
                width: 10px;
                height: 10px;
                min-width: 10px;
                min-height: 10px;
                max-width: 10px;
                max-height: 10px;
                border-width: 2px;
                border-radius: 50%;
                transition: all 0.3s ease;
                flex-shrink: 0;
                flex-grow: 0;
                aspect-ratio: 1/1;
                box-sizing: border-box;
            }
            
            .carousel-dot.active {
                transform: scale(1.2);
            }
            
            /* Touch-friendly improvements */
            .carousel-arrow:active {
                transform: translateY(-50%) scale(0.95);
            }
            
            .carousel-dot:active {
                transform: scale(0.9);
            }
        }
        
        /* Extra small screens */
        @media (max-width: 480px) {
            .hero-carousel {
                max-width: 100%;
            }
            
            .carousel-image {
                max-width: 480px;
            }
            
            .carousel-arrow {
                width: 36px;
                height: 36px;
                font-size: 12px;
                backdrop-filter: blur(20px);
            }
            
            .carousel-arrow-prev {
                left: 8px;
            }
            
            .carousel-arrow-next {
                right: 8px;
            }
            
            .carousel-dots {
                bottom: 8px;
                gap: 6px;
                padding: 4px 8px;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-wrap: nowrap;
                white-space: nowrap;
            }
            
            .carousel-dot {
                width: 8px;
                height: 8px;
                min-width: 8px;
                min-height: 8px;
                max-width: 8px;
                max-height: 8px;
                border-width: 2px;
                border-radius: 50%;
                flex-shrink: 0;
                flex-grow: 0;
                aspect-ratio: 1/1;
                box-sizing: border-box;
            }
            
            .carousel-dot.active {
                transform: scale(1.3);
            }
        }
        
        /* Ultra responsive mobile layout */
        @media (max-width: 360px) {
            .hero-carousel {
                max-width: 100%;
            }
            
            .carousel-image {
                max-width: 360px;
            }
            
            .carousel-arrow {
                width: 32px;
                height: 32px;
                font-size: 10px;
            }
            
            .carousel-arrow-prev {
                left: 6px;
            }
            
            .carousel-arrow-next {
                right: 6px;
            }
            
            .carousel-dots {
                bottom: 6px;
                gap: 4px;
                padding: 3px 6px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-wrap: nowrap;
                white-space: nowrap;
            }
            
            .carousel-dot {
                width: 6px;
                height: 6px;
                min-width: 6px;
                min-height: 6px;
                max-width: 6px;
                max-height: 6px;
                border-width: 1px;
                border-radius: 50%;
                flex-shrink: 0;
                flex-grow: 0;
                aspect-ratio: 1/1;
                box-sizing: border-box;
            }
        }
        
        /* Pause animation indicator */
        .hero-carousel.paused .carousel-dots::after {
            content: "⏸";
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }
        
        /* Mobile navbar adjustments for bigger logo */
        @media (max-width: 768px) {
            #mobile-menu-btn {
                font-size: 1.25rem;
                padding: 0.5rem;
            }
        }
        
        @media (max-width: 480px) {
            #mobile-menu-btn {
                font-size: 1.125rem;
            }
        }
        
        /* Contact section styling */
        .phone-contact-card {
            transition: all 0.3s ease;
            min-width: 140px;
        }
        
        .phone-contact-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(15, 90, 74, 0.15);
        }
        
        /* Mobile contact responsive */
        @media (max-width: 480px) {
            .mobile-phone-contact {
                padding: 0.5rem 0.875rem !important; /* a bit more padding on very small phones */
                border-radius: 0.5rem;
                background-color: rgba(15, 90, 74, 0.05);
            }
        }
        
        /* Contact buttons container responsive */
        @media (max-width: 1200px) {
            .phone-contact-card {
                min-width: 120px;
                padding: 0.375rem 0.5rem;
            }
        }
        
        /* Enhanced overlay for mobile readability */
        @media (max-width: 768px) {
            
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        /* RTL adjustments for dropdowns */
        .dropdown-content a {
            text-align: right;
            direction: rtl;
        }
        #hdr{
            height: 160px;
            display: flex;
            align-items: center;
            background-image: url('assets/hdr-background2.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6), 0 4px 15px rgba(0, 0, 0, 0.4);
        }
        #hdr::before {
            content: '';
            position: absolute;
            inset: 0;
            z-index: 0;
        }
        #hdr > * {
            position: relative;
            z-index: 1;
        }

        /* Curved underline design */
        .section-header-container {
            position: relative;
            text-align: center;
            margin-bottom: 40px;
            overflow: hidden;
        }

        .curved-underline {
            position: relative;
            display: inline-block;
            padding-bottom: 35px;
            margin-right: 0;
            margin-bottom: 0;
            max-width: 100%;
        }

        .section-subtitle {
            text-align: center;
            margin-top: 15px;
            margin-bottom: 20px;
            padding-right: 0;
            position: relative;
        }

        .curved-underline::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) translateY(-5px);
            width: min(300px, 80vw);
            height: 4px;
            background: var(--color-accent);
            border-radius: 0 0 0 35px;
            max-width: 100%;
        }

        .curved-underline.green::after { background: var(--color-primary); }
        .curved-underline.brown::after { background: var(--color-primary); }

        .curved-underline.white::after {
            background: #ffffff;
        }

        .curved-underline.gold::after {
            background: var(--color-accent);
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .curved-underline::after {
                width: min(200px, 70vw);
                height: 3px;
                border-radius: 0 0 0 25px;
                max-width: calc(100vw - 2rem);
            }
            
            .section-header-container {
                padding: 0 1rem;
                box-sizing: border-box;
            }
        }

        .news-scroll {
            animation: newsScroll-rtl 20s linear infinite;
        }
        
        @keyframes newsScroll-rtl {
            0% { transform: translateX(0); }
            100% { transform: translateX(50%); }
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .news-scroll {
                animation: newsScroll-rtl 12s linear infinite;
            }
        }

        /* News ticker cards - consistent height */
        #homepage-news-ticker .bg-white {
            height: 400px !important;
            display: flex !important;
            flex-direction: column !important;
        }
        
        #homepage-news-ticker .bg-white img {
            height: 180px !important;
            object-fit: cover !important;
            flex-shrink: 0 !important;
        }
        
        #homepage-news-ticker .bg-white .p-6 {
            flex: 1 !important;
            display: flex !important;
            flex-direction: column !important;
            justify-content: space-between !important;
        }
        
        #homepage-news-ticker .bg-white .p-6 h3 {
            line-height: 1.4 !important;
            margin-bottom: 0.75rem !important;
            height: auto !important;
            min-height: 2.8rem !important;
        }
        
        #homepage-news-ticker .bg-white .p-6 p {
            line-height: 1.5 !important;
            margin-bottom: auto !important;
        }
        
        #homepage-news-ticker .bg-white .p-6 .flex {
            margin-top: auto !important;
            flex-shrink: 0 !important;
        }

        /* Mobile news ticker adjustments */
        @media (max-width: 768px) {
            #homepage-news-ticker .bg-white {
                height: 350px !important;
            }
            
            #homepage-news-ticker .bg-white img {
                height: 150px !important;
            }
        }

        /* News highlights */
        .news-spotlight-grid {
            display: grid;
            gap: 1.5rem;
        }

        @media (min-width: 768px) {
            .news-spotlight-grid {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }

        .news-spotlight-card {
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
            background: rgba(255, 255, 255, 0.12);
            border-radius: 20px;
            padding: 2rem 1.75rem;
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25);
            transition: transform 0.25s ease, box-shadow 0.25s ease;
        }

        .news-spotlight-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 16px 32px rgba(0, 0, 0, 0.28);
        }

        .news-spotlight-icon {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.12);
            display: grid;
            place-items: center;
            color: var(--color-accent);
            font-size: 1.5rem;
        }

        .news-spotlight-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .news-spotlight-tag {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            background: rgba(160, 122, 71, 0.18);
            color: var(--color-accent);
            font-weight: 600;
        }

        .news-spotlight-card h3 {
            font-size: 1.4rem;
            font-weight: 700;
            margin: 0;
            color: #ffffff;
        }

        .news-spotlight-card p {
            margin: 0;
            color: rgba(255, 255, 255, 0.78);
            line-height: 1.8;
        }

        .news-spotlight-link {
            align-self: flex-start;
            margin-top: auto;
            font-weight: 600;
            color: var(--color-accent);
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            transition: color 0.2s ease;
        }

        .news-spotlight-link::after {
            content: '\f060';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            font-size: 0.75rem;
        }

        .news-spotlight-link:hover {
            color: #ffffff;
        }

        @media (max-width: 767px) {
            .news-spotlight-card {
                padding: 1.75rem 1.5rem;
            }

            .news-spotlight-meta {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.25rem;
            }
        }

        /* Timeline section (program highlights) */
        .timeline {
            position: relative;
        }
        @media (min-width: 768px) {
            .timeline::before {
                content: '';
                position: absolute;
                inset: 0 auto 0 50%;
                transform: translateX(-50%);
                width: 2px;
                background: color-mix(in srgb, var(--color-muted) 30%, transparent);
            }
            .timeline::after {
                content: '';
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                top: 0;
                width: 2px;
                height: var(--tl-progress, 0%);
                background: var(--color-primary);
                box-shadow: 0 6px 12px rgba(15,90,74,0.25);
                transition: height .25s ease;
            }
        }
        .timeline-item {
            position: relative;
        }
        .timeline-marker {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 50%;
            width: 32px;
            height: 32px;
            border-radius: 9999px;
            background: var(--color-surface);
            border: 2px solid var(--color-primary);
            display: grid;
            place-items: center;
            color: var(--color-primary);
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(0,0,0,0.06);
        }
        @media (max-width: 767px) {
            .timeline-marker { display: none; }
        }
        .img-placeholder {
            background: var(--color-bg);
            border: none;
            border-radius: 1rem;
            position: relative;
            overflow: hidden;
        }
        /* Ensure images fully cover their container without distortion */
        .img-placeholder > span {
            position: absolute;
            inset: 0;
            display: block;
            width: 100%;
            height: 100%;
        }
        .img-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        /* Smooth media reveal */
        .timeline-item .tl-media { opacity: 0; transform: translateY(12px) scale(.98); transition: opacity .45s ease, transform .45s ease; }
        .timeline-item.is-active .tl-media { opacity: 1; transform: translateY(0) scale(1); animation: none !important; }

        .timeline-item.is-active .timeline-marker {
            background: var(--color-primary);
            color: #fff;
            transform: translateX(-50%) scale(1.1);
            box-shadow: 0 8px 18px rgba(15,90,74,0.35);
        }
        .timeline-item.is-active .img-placeholder { border-color: var(--color-primary); }
        #program-highlights .timeline-item.is-active img { animation: none !important; }
        @keyframes highlightPulse {
            0% { box-shadow: 0 0 0 0 rgba(15,90,74,0); }
            50% { box-shadow: 0 12px 24px rgba(15,90,74,0.18); }
            100% { box-shadow: 0 0 0 0 rgba(15,90,74,0); }
        }
        @keyframes blinkOnce { 0% { opacity: .85; } 50% { opacity: 1; } 100% { opacity: 1; } }

        /* Achievements tiles */
        .achievements-stack {
            display: grid;
            gap: 1.5rem;
        }

        @media (min-width: 768px) {
            .achievements-stack {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }

        @media (min-width: 1024px) {
            .achievements-stack {
                grid-template-columns: repeat(4, minmax(0, 1fr));
            }
        }

        .achievement-tile {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 18px;
            padding: 1.75rem 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
            transition: transform 0.25s ease, box-shadow 0.25s ease;
            border-inline-start: 5px solid var(--color-primary);
        }

        .achievement-tile:hover {
            transform: translateY(-6px);
            box-shadow: 0 14px 30px rgba(0, 0, 0, 0.28);
        }

        .achievement-tile header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.75rem;
        }

        .achievement-icon-simple {
            width: 54px;
            height: 54px;
            border-radius: 50%;
            background: rgba(15, 90, 74, 0.18);
            border: 2px solid rgba(15, 90, 74, 0.55);
            display: grid;
            place-items: center;
            color: var(--color-primary);
        }

        .achievement-icon-simple i {
            font-size: 24px;
        }

        .achievement-tile h3 {
            margin: 0;
            font-size: 1.125rem;
            color: #ffffff;
        }

        .achievement-tile span.small-label {
            font-size: 0.75rem;
            letter-spacing: 0.12em;
            color: rgba(255, 255, 255, 0.55);
            display: block;
        }

        .achievement-number-simple {
            font-size: clamp(2.25rem, 6vw, 3.25rem);
            font-weight: 800;
            color: #ffffff;
            display: flex;
            align-items: baseline;
            gap: 0.4rem;
        }

        .achievement-number-simple .counter span,
        .achievement-number-simple span.suffix {
            color: var(--color-accent);
            font-size: clamp(1.75rem, 4vw, 2rem);
            font-weight: 700;
        }

        .achievement-tile p {
            margin: 0;
            font-size: 0.95rem;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.75);
        }

        .achievement-tile footer {
            margin-top: auto;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 0.5rem;
            color: rgba(255, 255, 255, 0.65);
            font-size: 0.85rem;
        }

        .achievement-tile footer::before {
            content: '';
            display: inline-block;
            width: 32px;
            height: 2px;
            background: var(--color-primary);
            border-radius: 999px;
        }

        .achievement-tile footer strong {
            color: #efb740;
            font-weight: 600;
        }

        @media (max-width: 640px) {
            .achievement-tile {
                padding: 1.5rem;
            }

            .achievement-number-simple {
                justify-content: flex-start;
            }
        }

        /* News and Achievements Section Backgrounds */
        .news-bg {
          background-image: url('assets/achivements-bg.jpg');
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }

                @media (max-width: 768px) {
                    .news-bg {
                        background-image: url('assets/achivements-bg.jpg') !important;
                        background-size: cover !important;
                        background-position: center !important;
                        background-repeat: no-repeat !important;
                    }
                }

        /* Desktop: White text on image background */
        .news-bg .section-subtitle {
            color: #fff !important;
        }

        @media (max-width: 768px) {
            .news-bg {
                background: #fff !important;
                background-image: none !important;
            }
            .news-bg h2 {
                color: var(--color-accent) !important;
            }
            .news-bg .section-subtitle {
                color: #000 !important;
            }
            .news-bg .curved-underline.gold::after {
                background: var(--color-accent) !important;
            }
        }
        /* Mobile: achievements use site primary color background (force) */
        @media (max-width: 768px) {
            .achievements-bg,
            .achievements-bg::before,
            .achievements-bg::after {
                background-color: var(--color-primary) !important;
                background-image: none !important;
                background: var(--color-primary) !important;
                background-repeat: no-repeat !important;
                background-size: auto !important;
                background-position: initial !important;
            }
        }
        /* Ensure the News Highlights section (#news) stays primary green on phones */
        @media (max-width: 768px) {
            #news {
                background: var(--color-primary) !important;
                background-image: none !important;
                color: #fff !important;
            }
            #news h2 { color: #fff !important; }
            #news .section-subtitle { color: rgba(255, 255, 255, 0.88) !important; }
        }
        #logo {
            cursor: pointer;}
    </style>
            <style>
                .hover-green:hover { color: var(--color-primary); }
            </style>
</head>
<body class="bg-gray-50">


    <header class="bg-white/90 backdrop-blur-md shadow-lg sticky top-0 z-50" role="navigation" aria-label="التنقل الرئيسي">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-3 md:py-8">
                <!-- Logo and Contact Section (Left side in RTL) -->
                <div class="flex items-center space-x-6 space-x-reverse mr-2 lg:mr-12">
                    <!-- Logo -->
                    <a href="index.html" class="w-16 h-12 sm:w-20 sm:h-16 md:w-32 md:h-28 lg:w-36 lg:h-32 flex items-center justify-center overflow-hidden cursor-pointer hover:opacity-90 transition-opacity" id="logo">
                        <img src="assets/logo-transparent.png" alt="تبيان لخدمة ضيوف الرحمن" class="w-full h-full object-contain rounded-lg shadow-md">
                    </a>
                    
                    <!-- Contact Buttons -->
                    <div class="hidden lg:flex flex-col space-y-2">
                        <!-- Phone Contact -->
                        <div class="flex items-center space-x-2 space-x-reverse bg-gray-50 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-[#6e1948]/5 hover:border-[#6e1948]/20 transition-colors phone-contact-card">
                            <i class="fas fa-phone text-[#6e1948] text-sm"></i>
                            <div class="flex flex-col text-right">
                                <span class="text-xs font-medium text-[#6e1948]">اتصل بنا</span>
                                <a href="tel:" class="text-xs text-gray-600 hover:text-[#6e1948] transition-colors">ستتم إضافته قريباً</a>
                            </div>
                        </div>
                        
                        <!-- Email Contact -->
                        <div class="flex items-center space-x-2 space-x-reverse bg-gray-50 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-[#6e1948]/5 hover:border-[#6e1948]/20 transition-colors phone-contact-card">
                            <i class="fas fa-envelope text-[#6e1948] text-sm"></i>
                            <div class="flex flex-col text-right">
                                <span class="text-xs font-medium text-[#6e1948]">راسلنا</span>
                                <a href="mailto:tabyan1445@gmail.com" class="text-xs text-gray-600 hover:text-[#6e1948] transition-colors">tabyan1445@gmail.com</a>
                            </div>
                        </div>
                    </div>
                </div>

                            <nav class="hidden lg:flex items-center space-x-8 space-x-reverse ml-2 lg:ml-12">
                <a href="index.html" class="text-gray-700 hover:text-[#6e1948] font-medium">الرئيسية</a>
                    
                    <!-- عن الجمعية -->
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#6e1948] font-medium flex items-center" aria-expanded="false">
                            عن الجمعية <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="license-certificate.html" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-certificate ml-2 text-[#6e1948]"></i>شهاده الترخيص</a>
                            <a href="commercial-registry.html" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-file-contract ml-2 text-[#6e1948]"></i>السجل التجاري</a>
                            <a href="general-assembly.html" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-users ml-2 text-[#6e1948]"></i>الجمعية العمومية</a>
                            <a href="board-of-directors.html" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-user-tie ml-2 text-[#6e1948]"></i>قرار التأسيس</a>
                            <a href="organizational-structure.html" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-sitemap ml-2 text-[#6e1948]"></i>الهيكل التنظيمي</a>
                            <a href="work-team.html" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-user-friends ml-2 text-[#6e1948]"></i>اعضاء مجلس الإدارة</a>
                        </div>
                    </div>
                    
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#6e1948] font-medium flex items-center" aria-expanded="false">
                            التقارير <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="annual-report-2025.html" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-file-alt ml-2 text-[#6e1948]"></i>التقرير السنوي لعام 2025</a>
                        </div>
                    </div>
                    
                    <!-- قياس الرضا -->
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#6e1948] font-medium flex items-center" aria-expanded="false">
                            قياس الرضا <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSeijwoiPG-DB-TQD-V6aWof1qe0Ar56P2gsOisKXdOThkbeNA/viewform?usp=dialog" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-smile ml-2 text-[#6e1948]"></i> رضا المستفيدين</a>
                            <a href="https://docs.google.com/forms/d/e/1FAIpQLScIaF9nYHxJxxhv5us05VdHgD4yqO1t5oFWrSSvRKxpvMN4lw/viewform?usp=dialog" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-user-check ml-2 text-[#6e1948]"></i> رضا أعضاء الجمعية العمومية</a>
                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSdCstU_E_kMhRqNPXZthbe5pm4yhmxXEt0o-9J_qvLCqGpO9Q/viewform?usp=dialog" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-id-badge ml-2 text-[#6e1948]"></i>رضا الموظفين </a>
                         
                        </div>
                    </div>
                    
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#6e1948] font-medium flex items-center" aria-expanded="false">
                            الحوكمة <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="assets/Hawkamah.rar" download class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-book ml-2 text-[#6e1948]"></i>ادلة الحوكمة</a>
                            <a href="privacy-policy.html" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-shield-alt ml-2 text-[#6e1948]"></i>سياسة الخصوصية</a>
                        </div>
                    </div>
                    
                    <!-- تطوع معنا -->
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#6e1948] font-medium flex items-center" aria-expanded="false">
                            تطوع معنا  <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="https://nvg.gov.sa/" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-hands-helping ml-2 text-[#6e1948]"></i>منصة العمل التطوعي</a>
                            <a href="volunteer-work.html" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-heart ml-2 text-[#6e1948]"></i>الفرص التطوعية</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-[#6e1948]/10"><i class="fas fa-user-plus ml-2 text-[#6e1948]"></i>إنضم معنا</a>
                        </div>
                    </div>
                    

                </nav>
                
                <!-- Mobile Contact & Menu -->
                <div class="lg:hidden flex items-center space-x-2 space-x-reverse">
                    <!-- Mobile Phone Contact -->
                    <a href="tel:" class="flex items-center space-x-1 space-x-reverse text-[#6e1948] hover:text-[#00c59e] transition-colors mobile-phone-contact">
                        <i class="fas fa-phone text-sm"></i>
                        <span class="text-xs font-medium">ستتم إضافته قريباً</span>
                    </a>
                    
                    <!-- Mobile Email Contact -->
                    <a href="mailto:tabyan1445@gmail.com" class="flex items-center space-x-1 space-x-reverse text-[#6e1948] hover:text-[#00c59e] transition-colors mobile-phone-contact">
                        <i class="fas fa-envelope text-sm"></i>
                        <span class="text-xs font-medium">راسل</span>
                    </a>
                    
                    <!-- Mobile Menu Button -->
                    <button class="text-gray-700" id="mobile-menu-btn">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div class="md:hidden bg-white/90 backdrop-blur-md border-t hidden" id="mobile-menu">
            <div class="px-4 py-6 space-y-2">
                <a href="index.html" class="block py-3 text-gray-700 hover:text-[#6e1948] font-medium mobile-menu-link"><i class="fas fa-home ml-2 text-[#6e1948]"></i>الرئيسية</a>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#6e1948] font-medium py-2">
                        عن الجمعية <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="license-certificate.html" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-certificate ml-2 text-[#6e1948]"></i>شهاده الترخيص</a>
                        <a href="commercial-registry.html" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-file-contract ml-2 text-[#6e1948]"></i>السجل التجاري</a>
                        <a href="general-assembly.html" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-users ml-2 text-[#6e1948]"></i>الجمعية العمومية</a>
                        <a href="board-of-directors.html" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-user-tie ml-2 text-[#6e1948]"></i>قرار التأسيس</a>
                        <a href="organizational-structure.html" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-sitemap ml-2 text-[#6e1948]"></i>الهيكل التنظيمي</a>
                        <a href="work-team.html" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-user-friends ml-2 text-[#6e1948]"></i>اعضاء مجلس الإدارة</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#6e1948] font-medium py-2">
                        التقارير <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="annual-report-2025.html" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-file-alt ml-2 text-[#6e1948]"></i>التقرير السنوي لعام 2025</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#6e1948] font-medium py-2">
                        قياس الرضا <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeijwoiPG-DB-TQD-V6aWof1qe0Ar56P2gsOisKXdOThkbeNA/viewform?usp=dialog" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-smile ml-2 text-[#6e1948]"></i>رضا المستفيدين</a>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLScIaF9nYHxJxxhv5us05VdHgD4yqO1t5oFWrSSvRKxpvMN4lw/viewform?usp=dialog" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-user-check ml-2 text-[#6e1948]"></i>رضا أعضاء الجمعية العمومية</a>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSdCstU_E_kMhRqNPXZthbe5pm4yhmxXEt0o-9J_qvLCqGpO9Q/viewform?usp=dialog" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-id-badge ml-2 text-[#6e1948]"></i>رضا الموظفين</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#6e1948] font-medium py-2">
                        الحوكمة <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="assets/Hawkamah.rar" download class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-book ml-2 text-[#6e1948]"></i>ادلة الحوكمة</a>
                        <a href="privacy-policy.html" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-shield-alt ml-2 text-[#6e1948]"></i>سياسة الخصوصية</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#6e1948] font-medium py-2">
                        تطوع معنا <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="https://nvg.gov.sa/" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-hands-helping ml-2 text-[#6e1948]"></i>منصة العمل التطوعي</a>
                        <a href="volunteer-work.html" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-heart ml-2 text-[#6e1948]"></i>الفرص التطوعية</a>
                        <a href="#" class="block py-3 text-gray-700 hover:bg-[#6e1948]/10 rounded-lg"><i class="fas fa-user-plus ml-2 text-[#6e1948]"></i>إنضم معنا</a>
                    </div>
                </div>
                
            </div>
        </div>
    </header>
    
    <main>
        <section class="relative" id="home">
            <!-- Hero Carousel -->
            <div class="hero-carousel">
                <!-- Manual slides (temporary, no DB) -->
                <div class="hero-slide manual-slide active">
                    <img class="carousel-image" src="assets/caro1.jpg" alt="صورة رئيسية 1">
                </div>
                <div class="hero-slide manual-slide">
                    <img class="carousel-image" src="assets/caro2.jpg" alt="صورة رئيسية 2">
                </div>
                
                <!-- Navigation Arrows -->
                <button class="carousel-arrow carousel-arrow-prev" id="prevSlide" aria-label="الشريحة السابقة">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="carousel-arrow carousel-arrow-next" id="nextSlide" aria-label="الشريحة التالية">
                    <i class="fas fa-chevron-right"></i>
                </button>
                
                <!-- Dot Indicators - Will be loaded dynamically from database -->
                <div class="carousel-dots">
                </div>
            </div>
            
            <div class="absolute inset-0 flex items-center justify-center hero-content pointer-events-none">
                <div class="max-w-7xl mx-auto px-4 text-center text-white">
                </div>
            </div>
        </section>
        
        <!-- Simple image + text section (added under carousel) -->
        <section id="intro-section" class="py-12 bg-white">
            <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row-reverse items-center gap-8 md:gap-12">
                <!-- Image placeholder (600×400) with unique corner style -->
                <div class="w-full md:w-1/2 flex justify-center md:justify-start">
                    <div class="relative w-full bg-gray-100" style="max-width: 600px; border: 1px solid #e5e7eb; border-radius: 36px 10px 36px 10px; overflow: hidden;">
                        <!-- Decorative blocked corner -->
                        <div class="absolute top-0 right-0 w-0 h-0" style="border-left: 70px solid transparent; border-bottom: 70px solid var(--color-accent);"></div>
                        <img src="assets/hero.jpg" alt="" class="block w-full h-auto">
                    </div>
                </div>
                <!-- Text -->
                <div class="w-full md:w-1/2 text-center max-w-2xl mx-auto md:mx-0">
                    <h2 class="text-2xl md:text-3xl font-bold text-[#6e1948] mb-4">من نحن</h2>
                    <p class="text-gray-700 leading-8">
                    
                    جمعية تبيان لخدمة ضيوف الرحمن حماية الشباب والفتيات، جمعية مسجلة رسمياً لدى المركز الوطني لتنمية القطاع غير الربحي تحت الترخيص رقم 5388، ومقرنا الرئيسي في جدة، منطقة مكة المكرمة. تأسست الجمعية بناءً على القرار الصادر بتاريخ 1445/02/11هـ، تماشياً مع نظام الجمعيات والمؤسسات الأهلية الصادر بالمرسوم الملكي رقم (م/٨) وتاريخ ١٤٣٧/٢/١٩هـ، ولائحته التنفيذية.
                    تهدف الجمعية إلى تمكين الشباب والفتيات وتنمية مهاراتهم، وتعزيز مشاركتهم في المجتمع، بما يتوافق مع رؤية المملكة 2030 في تنمية القطاع غير الربحي ودعم المبادرات الشبابية.
                </p>
                </div>
            </div>
        </section>
        
    <!-- Achievements Counter -->
     <section class="py-16 lg:bg-black/30 text-white achievements-bg">
            <div class="max-w-7xl mx-auto px-4">
                <div class="fade-in">
                    <div class="section-header-container">
                        <h2 class="text-4xl font-bold text-white curved-underline gold">تبيان لخدمة ضيوف الرحمن بالأرقام</h2>
                        <p class="text-xl text-white section-subtitle">نعمل معاً لبناء مجتمع أفضل</p>
                    </div>
                </div>
                
                <div class="achievements-stack">
                    <article class="achievement-tile fade-in">
                        <header>
                            <div class="achievement-icon-simple">
                                <i class="fas fa-hands-helping"></i>
                            </div>
                            <div class="text-right">
                                <span class="small-label">برامج التطوع</span>
                                <h3>مشروع تطوعي</h3>
                            </div>
                        </header>
                        <div class="achievement-number-simple">
                            <div class="counter" data-target="10"><span class="suffix">+</span>0</div>
                        </div>
                        <p>مبادرات يقودها فريقنا التطوعي لتحريك المجتمع نحو الخير.</p>
                        <footer>
                            <strong>قصص بشرية</strong>
                            <span>تشهد على أثر الخدمة المجتمعية</span>
                        </footer>
                    </article>
                    <article class="achievement-tile fade-in">
                        <header>
                            <div class="achievement-icon-simple">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="text-right">
                                <span class="small-label">الإنسان أولاً</span>
                                <h3>مستفيد</h3>
                            </div>
                        </header>
                        <div class="achievement-number-simple">
                            <div class="counter" data-target="5000"><span class="suffix">+</span>0</div>
                        </div>
                        <p>وجوه تعرفنا جيداً، وأُسر وجدت في تبيان لخدمة ضيوف الرحمن سنداً دائماً.</p>
                        <footer>
                            <strong>امتداد</strong>
                            <span>لشراكات محلية وعطاء مستمر</span>
                        </footer>
                    </article>
                    <article class="achievement-tile fade-in">
                        <header>
                            <div class="achievement-icon-simple">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="text-right">
                                <span class="small-label">فعاليات مستمرة</span>
                                <h3>برنامج مجتمعي</h3>
                            </div>
                        </header>
                        <div class="achievement-number-simple">
                            <div class="counter" data-target="25"><span class="suffix">+</span>0</div>
                        </div>
                        <p>لقاءات وورش ودورات تنسج جسوراً بين المعرفة والعمل.</p>
                        <footer>
                            <strong>تنظيم</strong>
                            <span>بفريق نسائي وشبابي متطوع</span>
                        </footer>
                    </article>
                    <article class="achievement-tile fade-in">
                        <header>
                            <div class="achievement-icon-simple">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="text-right">
                                <span class="small-label">ثقة شركائنا</span>
                                <h3>% معدل الرضا</h3>
                            </div>
                        </header>
                        <div class="achievement-number-simple">
                            <div class="counter" data-target="95">0<span class="suffix">%</span></div>
                        </div>
                        <p>معيار نقيس به رضا المستفيد والشريك قبل كل مشروع جديد.</p>
                        <footer>
                            <strong>التزام</strong>
                            <span>بمعايير الحوكمة وجودة الخدمة</span>
                        </footer>
                    </article>
                </div>
            </div>
        </section>
        
        <!-- Program Highlights Timeline (new) -->
        <section class="py-16 bg-surface" id="program-highlights" aria-labelledby="program-highlights-title">
            <div class="max-w-7xl mx-auto px-4">
                <div class="fade-in text-center md:text-right">
                    <h2 id="program-highlights-title" class="text-4xl font-bold text-primary curved-underline gold">لمحات من برامجنا</h2>
                    <p class="text-lg text-muted section-subtitle md:text-right md:mx-0 mx-auto max-w-3xl">
                        نستعرض هنا بعض الإنجازات البارزة التي حققتها جمعية تبيان لخدمة ضيوف الرحمن في خدمة المجتمع.
                    </p>
                </div>

                <div class="timeline mt-12 space-y-14">
                    <!-- Item 01 -->
                    <div class="timeline-item grid md:grid-cols-2 gap-8 md:gap-12 items-center">
                        <div class="md:order-2">
                            <div class="img-placeholder tl-media aspect-[4/3] shadow-sm">
                                <span class="text-sm"><img src="assets/theone.jpg" alt=""></span>
                            </div>
                        </div>
                        <div class="md:order-1">
                            <h3 class="text-2xl font-bold text-primary mb-3">رحلة النور</h3>
                            <p class="text-gray-700 leading-8">
                                ببرنامج تربوي دعوي للمدينة المنورة تنظمه الجمعية بمشاركة 50 شاباً. يجمع بين العبادة في المسجد النبوي ودراسة السيرة النبوية وبناء الشخصية. يهدف إلى تعزيز القيم الإسلامية وتنمية الروحانية وبناء جيل واعٍ متمسك بهويته.
                            </p>
                        </div>
                        <span class="timeline-marker" aria-hidden="true">01</span>
                    </div>

                    <!-- Item 02 -->
                    <div class="timeline-item grid md:grid-cols-2 gap-8 md:gap-12 items-center">
                        <div class="md:order-1">
                            <div class="img-placeholder tl-media aspect-[4/3] shadow-sm">
                                <span class="text-sm"><img src="assets/thetwo.jpg" alt=""></span>
                            </div>
                        </div>
                        <div class="md:order-2">
                            <h3 class="text-2xl font-bold text-primary mb-3">برنامج سفراء</h3>
                            <p class="text-gray-700 leading-8">
                              برنامج "دعوة الشباب" هو مبادرة نوعية تهدف إلى استقطاب الشباب والفتيات وتأهيلهم ليكونوا سفراء للتغيير الإيجابي في مجتمعاتهم. يجمع البرنامج بين الأسس الشرعية والمنهجية العصرية لبناء الشخصية المسلمة المتكاملة.
                            </p>
                        </div>
                        <span class="timeline-marker" aria-hidden="true">02</span>
                    </div>

                    <!-- Item 03 -->
                    <div class="timeline-item grid md:grid-cols-2 gap-8 md:gap-12 items-center">
                        <div class="md:order-2">
                            <div class="img-placeholder tl-media aspect-[4/3] shadow-sm">
                                <span class="text-sm"><img src="assets/thethree.jpg" alt=""></span>
                            </div>
                        </div>
                        <div class="md:order-1">
                            <h3 class="text-2xl font-bold text-primary mb-3">برنامج تبيان لخدمة ضيوف الرحمن</h3>
                            <p class="text-gray-700 leading-8">
                               تقدم جمعيتنا رحلات وتجارب نوعية تدمج بين المتعة والتعلم، تشمل رحلات استكشافية وتطوعية وثقافية. تهدف إلى تنمية مهارات الشباب وغرس القيم الإيجابية من خلال تجارب عملية محفزة، بإشراف متخصصين وبيئة آمنة تدعم بناء الشخصية المتكاملة.                            </p>
                        </div>
                        <span class="timeline-marker" aria-hidden="true">03</span>
                    </div>
                </div>
            </div>
        </section>
                <!-- قيمنا (Values) - New Small Section -->
        <section id="values" class="py-16 bg-gray-50/60 border-t">
            <div class="max-w-7xl mx-auto px-4">
                <div class="fade-in text-center md:text-right">
                    <h2 class="text-3xl md:text-4xl font-bold text-primary curved-underline gold">قيمنا</h2>
                    <p class="text-lg text-muted section-subtitle md:text-right md:mx-0 mx-auto max-w-3xl">قيم ثابتة تقود عملنا وتنعكس في جميع برامجنا وشراكاتنا.</p>
                </div>
                <div class="mt-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5">
                    <div class="bg-surface rounded-2xl p-6 shadow-sm ring-1 ring-black/5 hover:shadow-md transition-all">
                        <div class="w-12 h-12 rounded-xl bg-primary/10 text-primary grid place-items-center mb-4">
                            <i class="fas fa-shield-alt" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-lg font-bold text-primary mb-2">الأمانة</h3>
                        <p class="text-muted text-sm leading-7">نلتزم بأعلى معايير الأمانة في تخطيط البرامج وتنفيذها وخدمة المستفيدين.</p>
                    </div>
                    <div class="bg-surface rounded-2xl p-6 shadow-sm ring-1 ring-black/5 hover:shadow-md transition-all">
                        <div class="w-12 h-12 rounded-xl bg-primary/10 text-primary grid place-items-center mb-4">
                            <i class="fas fa-balance-scale" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-lg font-bold text-primary mb-2">الشفافية</h3>
                        <p class="text-muted text-sm leading-7">وضوح في التواصل والإفصاح عن النتائج بما يرسخ الثقة مع الشركاء والمجتمع.</p>
                    </div>
                    <div class="bg-surface rounded-2xl p-6 shadow-sm ring-1 ring-black/5 hover:shadow-md transition-all">
                        <div class="w-12 h-12 rounded-xl bg-primary/10 text-primary grid place-items-center mb-4">
                            <i class="fas fa-star" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-lg font-bold text-primary mb-2">التميّز</h3>
                        <p class="text-muted text-sm leading-7">سعي مستمر لتقديم برامج نوعية ذات أثر ملموس واستدامة عالية.</p>
                    </div>
                    <div class="bg-surface rounded-2xl p-6 shadow-sm ring-1 ring-black/5 hover:shadow-md transition-all">
                        <div class="w-12 h-12 rounded-xl bg-primary/10 text-primary grid place-items-center mb-4">
                            <i class="fas fa-handshake" aria-hidden="true"></i>
                        </div>
                        <h3 class="text-lg font-bold text-primary mb-2">الشراكة</h3>
                        <p class="text-muted text-sm leading-7">نؤمن بقوة الشراكات والتكامل مع الجهات لتحقيق أثر أوسع وأعمق.</p>
                    </div>
                </div>
            </div>
        </section>

                      <!-- Recent News -->
    <section id="news" class="py-16 bg-primary news-bg">
            <div class="max-w-7xl mx-auto px-4">
                <div class="fade-in">
                    <div class="section-header-container">
                        <h2 class="text-4xl font-bold text-white curved-underline gold">أخبار تبيان لخدمة ضيوف الرحمن</h2>
                        <p class="text-xl text-white section-subtitle">ابق على اطلاع بآخر أخبار وأنشطة تبيان لخدمة ضيوف الرحمن</p>
                    </div>
                </div>
                
                <div class="overflow-hidden">
                  <div id="homepage-news-ticker" class="flex items-center justify-center space-x-8 space-x-reverse news-scroll">
                  </div>
                </div>
                
                <div class="text-center mt-12">
                    <a href="news.html" class="btn-accent px-8 py-3 rounded-lg font-bold hover:bg-primary transition-colors inline-flex items-center">
                        عرض جميع الأخبار
                        <i class="fas fa-arrow-left mr-2"></i>
                    </a>
                </div>
            </div>
        </section>

        
        <!-- Partners Carousel -->
        <section class="py-16 bg-white border-t">
            <div class="max-w-7xl mx-auto px-4">
                <div class="fade-in">
                    <div class="section-header-container">
                        <h2 class="text-4xl font-bold text-accent curved-underline gold">شركاء النجاح</h2>
                        <p class="text-xl text-gray-600 section-subtitle">نعمل مع أفضل الشركات والمؤسسات لخدمة مجتمعنا</p>
                    </div>
                </div>
                
                <div class="overflow-hidden">
                    <div class="flex items-center justify-center space-x-8 space-x-reverse partner-scroll">
                        <div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partner1.jpeg" alt="شريك 1" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partnet2.jpeg" alt="شريك 2" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partner3.jpeg" alt="شريك 3" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partner4.jpeg" alt="شريك 4" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partner5.jpeg" alt="شريك 5" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partner6.jpeg" alt="شريك 6" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partner1.jpeg" alt="شريك 9" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partner3.jpeg" alt="شريك 11" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partner4.jpeg" alt="شريك 12" class="max-w-full max-h-full object-contain">
                        </div>
                        <div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partner1.jpeg" alt="شريك 13" class="max-w-full max-h-full object-contain">
                        </div>
                        <div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partner5.jpeg" alt="شريك 14" class="max-w-full max-h-full object-contain">
                        </div>
                        <div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/partner6.jpeg" alt="شريك 15" class="max-w-full max-h-full object-contain">
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
  



    <!-- Footer -->
    <footer class="bg-primary text-white">
        <div class="max-w-7xl mx-auto px-4 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- About Section -->
                <div class="mb-8 md:mb-0 text-center md:text-right">
                    <div class="flex items-center space-x-3 space-x-reverse mb-6 justify-center md:justify-start">
                        <div class="w-10 h-10 bg-white/30 rounded-full flex items-center justify-center">
                            <i class="fas fa-book-quran text-white"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">جمعية تبيان لخدمة ضيوف الرحمن<h3>
                           
                        </div>
                    </div>
                    <p class="text-white mb-6">جمعية تبيان لخدمة ضيوف الرحمن تهدف إلى تعزيز القيم الدينية والمجتمعية عبر برامج نوعية وأنشطة هادفة.</p>
                    <div class="flex space-x-4 space-x-reverse justify-center md:justify-start">
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-accent hover:text-white transition-colors">
                            <i class="fab fa-facebook text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-accent hover:text-white transition-colors">
                            <i class="fab fa-twitter text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-accent hover:text-white transition-colors">
                            <i class="fab fa-instagram text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-accent hover:text-white transition-colors">
                            <i class="fab fa-linkedin text-white"></i>
                        </a>
                    </div>
                </div>
                

                <div class="mb-8 md:mb-0 flex justify-center footer-images">
                   <img src="assets/nonprofitTransparent.png" alt="logo" class="w-full max-w-[200px] h-auto object-contain">
                </div>

                <div class="mb-8 md:mb-0 flex justify-center footer-images">
                    <img src="assets/vision2030Transparent.png" alt="logo" class="w-full max-w-[200px] h-auto object-contain">
                </div>
                
                <!-- Contact Info -->
                <div class="mb-8 md:mb-0 text-center md:text-right">
                    <h3 class="text-lg font-bold mb-6">معلومات الاتصال</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-map-marker-alt text-accent ml-3"></i>
                            <span class="text-white">المملكة العربية السعودية، جده، حي الورود</span>
                        </div>
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-phone text-accent ml-3"></i>
                            <a href="tel:" class="text-white hover:text-accent transition-colors">ستتم إضافته قريباً</a>
                        </div>
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-envelope text-accent ml-3"></i>
                            <a href="mailto:tabyan1445@gmail.com" class="text-white hover:text-accent transition-colors">tabyan1445@gmail.com</a>
                        </div>
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-clock text-accent ml-3"></i>
                            <span class="text-white">الأحد - الخميس: 8:00 ص - 4:00 م</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        

        <div class="border-t border-white/20">
            <div class="max-w-7xl mx-auto px-4 py-6">
                <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-right">
                    <p class="text-white text-sm mb-4 md:mb-0">
                        &copy; 2025 جمعية تبيان لخدمة ضيوف الرحمن. جميع الحقوق محفوظة.
                    </p>
                    <div class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-6 md:space-x-reverse">
                        <a href="privacy-policy.html" class="text-white hover:text-accent text-sm transition-colors">سياسة الخصوصية</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
        
        <!-- Scroll to Top Button -->
        <button id="scroll-to-top" class="fixed bottom-6 left-6 bg-primary text-white w-12 h-12 rounded-full shadow-lg hover:bg-primary/90 transition-all duration-300 opacity-0 invisible">
            <i class="fas fa-arrow-up"></i>
        </button>

    <!-- Lightbox Modal -->
    <div class="lightbox" id="lightbox">
        <div class="relative max-w-4xl mx-4">
            <button class="absolute -top-10 right-0 text-white text-2xl hover:text-gray-300" id="close-lightbox">
                <i class="fas fa-times"></i>
            </button>
            <img id="lightbox-image" src="" alt="" class="max-w-full max-h-screen object-contain rounded-lg">
        </div>
    </div>

    <script>


// ========== SECURITY UTILITIES ==========
function sanitizeHTML(str) {
    if (!str) return '';
    return str.replace(/[&<>"']/g, function(match) {
        return {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#39;'
        }[match];
    });
}


    function checkSiteClosure() {
        const isClosed = localStorage.getItem('mthani-site-closed') === 'true';
        if (isClosed && !window.location.pathname.includes('dashboard.html')) {

            console.warn('Site is in maintenance mode');
            return false;
        }
        return true;
    }


window.onerror = function(message, source, lineno, colno, error) {
    console.error('JavaScript Error:', { message, source, lineno, colno, error });

    if (message.includes('Script error') || message.includes('Network Error') || message.includes('Cannot read property')) {
        setTimeout(() => {
            window.location.href = 'error.html?code=js&msg=' + encodeURIComponent(message);
        }, 3000); 
    }
    return false;
};


window.addEventListener('unhandledrejection', function(event) {
    console.error('Unhandled Promise Rejection:', event.reason);

    if (event.reason && (event.reason.toString().includes('Network') || event.reason.toString().includes('Failed to fetch'))) {
        setTimeout(() => {
            window.location.href = 'error.html?code=promise&msg=' + encodeURIComponent(event.reason);
        }, 3000);
    }
});


document.addEventListener('DOMContentLoaded', function() {

    if (!checkSiteClosure()) return;
    
    // ========== DROPDOWN MENU FUNCTIONALITY ==========
    const dropdowns = document.querySelectorAll('.dropdown');
    dropdowns.forEach(dropdown => {
        const button = dropdown.querySelector('button');
        const content = dropdown.querySelector('.dropdown-content');
        
        // Show dropdown on mouse enter
        dropdown.addEventListener('mouseenter', function() {
            // Close other dropdowns
            dropdowns.forEach(otherDropdown => {
                if (otherDropdown !== dropdown) {
                    otherDropdown.querySelector('.dropdown-content').style.display = 'none';
                    otherDropdown.querySelector('button').setAttribute('aria-expanded', 'false');
                }
            });
            
            // Show current dropdown
            content.style.display = 'block';
            button.setAttribute('aria-expanded', 'true');
        });
        
        // Hide dropdown on mouse leave
        dropdown.addEventListener('mouseleave', function() {
            content.style.display = 'none';
            button.setAttribute('aria-expanded', 'false');
        });
        
        // Handle keyboard navigation for accessibility
        button.addEventListener('click', function(e) {
            e.preventDefault();
        });
    });

    // ========== MOBILE MENU FUNCTIONALITY ==========
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
            const icon = mobileMenuBtn.querySelector('i');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');
            
            // Reset all mobile dropdowns to hidden when opening menu
            if (!mobileMenu.classList.contains('hidden')) {
                const allMobileDropdowns = mobileMenu.querySelectorAll('.mobile-dropdown-content');
                allMobileDropdowns.forEach(dropdown => {
                    dropdown.classList.add('hidden');
                });
            }
        });
    }



    

    // ========== NEWS TICKER FUNCTIONALITY ==========
    const newsTicker = document.getElementById('news-ticker');
    if (newsTicker) {
        let tickerPosition = 0;
        const tickerSpeed = 1;

        function animateTicker() {
            tickerPosition -= tickerSpeed;
            if (tickerPosition <= -newsTicker.offsetWidth) {
                tickerPosition = newsTicker.parentElement.offsetWidth;
            }
            newsTicker.style.transform = `translateX(${tickerPosition}px)`;
            requestAnimationFrame(animateTicker);
        }

        animateTicker();
    }

    // ========== MEDIA TABS FUNCTIONALITY ==========
    const mediaTabs = document.querySelectorAll('.media-tab');
    const mediaContents = document.querySelectorAll('.media-content');

    mediaTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const targetTab = this.dataset.tab;
            
            // Update active tab
            mediaTabs.forEach(t => t.classList.remove('active', 'bg-white', 'text-[#432d17]'));
            this.classList.add('active', 'bg-white', 'text-[#432d17]');
            
            // Show/hide content
            mediaContents.forEach(content => {
                if (content.id === targetTab) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            });
        });
    });

    // ========== LIGHTBOX FUNCTIONALITY ==========
    const lightboxTriggers = document.querySelectorAll('.lightbox-trigger');
    let lightboxModal = null;

    function createLightbox(src, title) {
        // Remove existing lightbox if any lol lol
        if (lightboxModal) {
            lightboxModal.remove();
        }

        // Create lightbox modal
        lightboxModal = document.createElement('div');
        lightboxModal.className = 'fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4';
        lightboxModal.innerHTML = `
            <div class="relative max-w-4xl max-h-full">
                <img src="${src}" alt="${title}" class="max-w-full max-h-full object-contain">
                <button class="absolute top-4 right-4 text-white text-2xl hover:text-gray-300 lightbox-close">
                    <i class="fas fa-times"></i>
                </button>
                <div class="absolute bottom-4 left-4 text-white bg-black bg-opacity-50 px-4 py-2 rounded">
                    <h3 class="font-semibold">${title}</h3>
                </div>
            </div>
        `;

        document.body.appendChild(lightboxModal);

        // Close lightbox functionality
        const closeBtn = lightboxModal.querySelector('.lightbox-close');
        closeBtn.addEventListener('click', closeLightbox);
        
        lightboxModal.addEventListener('click', function(e) {
            if (e.target === lightboxModal) {
                closeLightbox();
            }
        });


        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeLightbox();
            }
        });
    }

    function closeLightbox() {
        if (lightboxModal) {
            lightboxModal.remove();
            lightboxModal = null;
        }
    }

    lightboxTriggers.forEach(trigger => {
        trigger.addEventListener('click', function() {
            const src = this.dataset.src;
            const title = this.querySelector('h3').textContent;
            createLightbox(src, title);
        });
    });

    //  COUNTER ANIMATION 
    const counters = document.querySelectorAll('.counter');
    const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const counter = entry.target;
                const target = parseInt(counter.dataset.target);
                let duration = Math.min(4000, Math.max(1200, target * 10)); 
                if (target > 10000) duration = Math.min(6000, target * 0.2); 
                const step = target / (duration / 16); // 60fps
                let current = 0;

                counter.style.transition = 'transform 0.3s cubic-bezier(.68,-0.55,.27,1.55), color 0.3s';
                counter.style.transform = 'scale(1.2)';
                counter.style.color = 'white';

                setTimeout(() => {
                    counter.style.transform = 'scale(1)';
                }, 300);

                const updateCounter = () => {
                    if (current < target) {
                        current += step;
                        const existingIcon = counter.querySelector('span');
                        const iconSymbol = target === 95 ? '%' : '+';
                        if (target === 95) {
                            counter.innerHTML = Math.floor(current).toLocaleString('en-US') + (existingIcon ? existingIcon.outerHTML : `<span class="text-[#efb740] text-2xl mr-1">${iconSymbol}</span>`);
                        } else {
                            counter.innerHTML = (existingIcon ? existingIcon.outerHTML : `<span class="text-[#efb740] text-2xl ml-1">${iconSymbol}</span>`) + Math.floor(current).toLocaleString('en-US');
                        }
                        if (target > 0 && Math.abs(current % (target / 5)) < step) {
                            counter.style.transform = 'scale(1.15)';
                            setTimeout(() => {
                                counter.style.transform = 'scale(1)';
                            }, 120);
                        }
                        requestAnimationFrame(updateCounter);
                    } else {
                        const existingIcon = counter.querySelector('span');
                        const iconSymbol = target === 95 ? '%' : '+';
                        if (target === 95) {
                            counter.innerHTML = target.toLocaleString('en-US') + (existingIcon ? existingIcon.outerHTML : `<span class="text-[#efb740] text-2xl mr-1">${iconSymbol}</span>`);
                        } else {
                            counter.innerHTML = (existingIcon ? existingIcon.outerHTML : `<span class="text-[#efb740] text-2xl ml-1">${iconSymbol}</span>`) + target.toLocaleString('en-US');
                        }
                        counter.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            counter.style.transform = 'scale(1)';
                        }, 200);
                    }
                };

                updateCounter();
                counterObserver.unobserve(counter);
            }
        });
    });

    counters.forEach(counter => {
        counterObserver.observe(counter);
    });

    // PARTNERS CAROUSEL
    const partnerScroll = document.querySelector('.partner-scroll');
    if (partnerScroll) {
        let scrollPosition = 0;
        const scrollSpeed = 1;

        function animatePartners() {
            scrollPosition -= scrollSpeed;
            if (scrollPosition <= -partnerScroll.scrollWidth / 2) {
                scrollPosition = 0;
            }
            partnerScroll.style.transform = `translateX(${scrollPosition}px)`;
            requestAnimationFrame(animatePartners);
        }

        animatePartners();
    }
    // FADE IN ANIMATION
    const fadeElements = document.querySelectorAll('.fade-in');
    const fadeObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Element is in view - animate in
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            } else {
                // Element is out of view - reset for next animation
                entry.target.style.opacity = '0';
                entry.target.style.transform = 'translateY(30px)';
            }
        });
    }, {
        threshold: 0.1
    });

    fadeElements.forEach(element => {
        element.style.opacity = '0';
        element.style.transform = 'translateY(30px)';
        element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        fadeObserver.observe(element);
    });

    // SCROLL TO TOP FUNCTIONALITY (reuse existing button if present)
    const scrollToTopBtn = document.getElementById('scroll-to-top') || (function(){
        const btn = document.createElement('button');
        btn.id = 'scroll-to-top';
        btn.className = 'fixed bottom-6 left-6 bg-primary text-white w-12 h-12 rounded-full shadow-lg hover:bg-primary/90 transition-all duration-300 z-50';
        btn.innerHTML = '<i class="fas fa-chevron-up"></i>';
        document.body.appendChild(btn);
        return btn;
    })();
    scrollToTopBtn.style.display = 'none';

    scrollToTopBtn.addEventListener('click', function() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });

    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
            scrollToTopBtn.style.display = 'flex';
            scrollToTopBtn.style.alignItems = 'center';
            scrollToTopBtn.style.justifyContent = 'center';
        } else {
            scrollToTopBtn.style.display = 'none';
        }
    });

    // ========== SMOOTH SCROLLING FOR ANCHOR LINKS ==========
    const anchorLinks = document.querySelectorAll('a[href^="#"]');
    anchorLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // ========== SERVICE CARDS INTERACTIONS ==========
    const serviceCards = document.querySelectorAll('.hero-content .grid > div, .grid.grid-cols-2.md\\:grid-cols-4.lg\\:grid-cols-6 > div');
    serviceCards.forEach(card => {
        card.addEventListener('click', function() {
            const serviceName = this.querySelector('h3').textContent;
            alert(`سيتم توجيهكم إلى صفحة ${serviceName} قريباً`);
        });
    });

    // ========== ACCESSIBILITY ENHANCEMENTS ==========
    
    // Keyboard navigation for dropdowns
    dropdowns.forEach(dropdown => {
        const button = dropdown.querySelector('button');
        const links = dropdown.querySelectorAll('a');
        
        button.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                this.click();
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                const content = dropdown.querySelector('.dropdown-content');
                if (content.style.display === 'block') {
                    const firstLink = content.querySelector('a');
                    if (firstLink) firstLink.focus();
                }
            }
        });

        links.forEach((link, index) => {
            link.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    const nextLink = links[index + 1];
                    if (nextLink) nextLink.focus();
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    const prevLink = links[index - 1];
                    if (prevLink) {
                        prevLink.focus();
                    } else {
                        button.focus();
                    }
                } else if (e.key === 'Escape') {
                    dropdown.querySelector('.dropdown-content').style.display = 'none';
                    button.setAttribute('aria-expanded', 'false');
                    button.focus();
                }
            });
        });
    });

    // ========== MOBILE MENU DROPDOWN FUNCTIONALITY ==========
    const mobileDropdowns = document.querySelectorAll('.mobile-dropdown');
    mobileDropdowns.forEach(drop => {
        const btn = drop.querySelector('button');
        const content = drop.querySelector('.mobile-dropdown-content');
        
        // Handle dropdown button click (show/hide dropdown within mobile menu)
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Close other dropdowns
            mobileDropdowns.forEach(other => {
                if (other !== drop) {
                    other.querySelector('.mobile-dropdown-content').classList.add('hidden');
                }
            });
            
            // Toggle current dropdown
            content.classList.toggle('hidden');
        });
        
        const dropdownLinks = content.querySelectorAll('a');
        dropdownLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                mobileMenu.classList.add('hidden');
                const icon = mobileMenuBtn.querySelector('i');
                icon.classList.add('fa-bars');
                icon.classList.remove('fa-times');
                
                mobileDropdowns.forEach(dropdown => {
                    dropdown.querySelector('.mobile-dropdown-content').classList.add('hidden');
                });
            });
        });
    });

    // ========== MOBILE MENU REGULAR LINKS ==========
    const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');
    mobileMenuLinks.forEach(link => {
        link.addEventListener('click', function() {
            // Close mobile menu when regular link is clicked
            mobileMenu.classList.add('hidden');
            const icon = mobileMenuBtn.querySelector('i');
            icon.classList.add('fa-bars');
            icon.classList.remove('fa-times');
        });
    });

    // ========== PERFORMANCE OPTIMIZATIONS ==========
    
    // Lazy loading for images (if supported)
    if ('IntersectionObserver' in window) {
        const lazyImages = document.querySelectorAll('img[data-src]');
        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.classList.remove('lazy');
                    imageObserver.unobserve(img);
                }
            });
        });

        lazyImages.forEach(img => imageObserver.observe(img));
    }

    // ========== ERROR HANDLING ==========
    window.addEventListener('error', function(e) {
        console.error('JavaScript Error:', e.error);
        // Could send error to logging service here
    });

    // ========== INITIALIZATION COMPLETE ==========
    
    // Dispatch custom event to indicate site is ready
    const siteReadyEvent = new CustomEvent('siteReady', {
        detail: { message: 'الموقع جاهز للاستخدام' }
    });
    document.dispatchEvent(siteReadyEvent);
});

// Hero carousel: auto-slide every 3s and draggable left/right; arrows/dots hidden via CSS
document.addEventListener('DOMContentLoaded', function () {
    const INTERVAL = 3000; // 3 seconds
    const carousel = document.querySelector('.hero-carousel');
    if (!carousel) return;

    const slides = Array.from(carousel.querySelectorAll('.hero-slide.manual-slide'));
    if (!slides.length) return;

    let current = slides.findIndex(s => s.classList.contains('active'));
    if (current < 0) {
        current = 0;
        slides[0].classList.add('active');
    }

    let timer = null;

    function showSlide(index) {
        if (!slides.length) return;
        const nextIndex = (index + slides.length) % slides.length;
        if (nextIndex === current) return;
        slides[current].classList.remove('active');
        slides[nextIndex].classList.add('active');
        current = nextIndex;
    }

    function nextSlide() { showSlide(current + 1); }
    function prevSlide() { showSlide(current - 1); }

    function startAuto() {
        stopAuto();
        timer = setInterval(nextSlide, INTERVAL);
    }
    function stopAuto() {
        if (timer) { clearInterval(timer); timer = null; }
    }

    // Basic swipe/drag support (touch and pointer)
    let startX = 0;
    let dragging = false;

    const getX = (e) => {
        if (e.touches && e.touches[0]) return e.touches[0].clientX;
        if (e.changedTouches && e.changedTouches[0]) return e.changedTouches[0].clientX;
        return e.clientX;
    };

    const onStart = (e) => {
        dragging = true;
        startX = getX(e) || 0;
        stopAuto();
    };
    const onEnd = (e) => {
        if (!dragging) return;
        dragging = false;
        const endX = getX(e) || 0;
        const dx = endX - startX;
        const threshold = 40; // px
        if (dx > threshold) {
            // drag right -> previous slide
            prevSlide();
        } else if (dx < -threshold) {
            // drag left -> next slide
            nextSlide();
        }
        startAuto();
    };

    // Pointer events (modern browsers)
    carousel.addEventListener('pointerdown', onStart, { passive: true });
    carousel.addEventListener('pointerup', onEnd);
    carousel.addEventListener('pointercancel', onEnd);

    // Touch events (fallback)
    carousel.addEventListener('touchstart', onStart, { passive: true });
    carousel.addEventListener('touchend', onEnd);
    carousel.addEventListener('touchcancel', onEnd);

    startAuto();
});

// ========== UTILITY FUNCTIONS ==========

// Function to format numbers in Arabic
function formatArabicNumber(number) {
    return number.toString().replace(/\d/g, function(d) {
        return '٠١٢٣٤٥٦٧٨٩'[d];
    });
}

// Function to handle RTL text direction
function handleRTL() {
    document.documentElement.setAttribute('dir', 'rtl');
    document.documentElement.setAttribute('lang', 'ar');
}

// Function to detect if user prefers reduced motion
function respectsReducedMotion() {
    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;
}

// Apply reduced motion preferences
if (respectsReducedMotion()) {
    const style = document.createElement('style');
    style.textContent = `
        *, *::before, *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    `;
    document.head.appendChild(style);
}

// Load 6 random news cards from database for homepage ticker
(async function() {
    const ticker = document.getElementById('homepage-news-ticker');
    if (!ticker) return;
    
    try {
        // Show loading state
        ticker.innerHTML = `
            <div class="bg-white rounded-lg shadow-lg p-6 text-center flex-shrink-0" style="min-width: 320px;">
                <i class="fas fa-spinner fa-spin text-gray-400 text-4xl mb-2"></i>
                <h3 class="text-lg font-bold text-gray-800 mb-2">جاري تحميل الأخبار...</h3>
            </div>
        `;
        
        const savedNews = await databaseService.getAllNews();
    
    if (savedNews.length === 0) {
        ticker.innerHTML = `
            <div class="bg-white rounded-lg shadow-lg p-6 text-center flex-shrink-0" style="min-width: 320px;">
                <i class="fas fa-newspaper text-gray-400 text-4xl mb-2"></i>
                <h3 class="text-lg font-bold text-gray-800 mb-2">لا توجد أخبار</h3>
                <p class="text-gray-600 text-sm">سيتم عرض الأخبار هنا عند إضافتها من لوحة التحكم</p>
            </div>
        `;
        return;
    }
    
    // Shuffle and pick 6
    const shuffled = [...savedNews];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    const selected = shuffled.slice(0, 6);
    
    // Format date function
    function formatDate(dateString) {
        const date = new Date(dateString);
        const months = ['يناير','فبراير','مارس','ابريل','مايو','يونيو','يوليو','اغسطس','سبتمبر','اكتوبر','نوفمبر','ديسمبر'];
        return `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`;
    }
    
    // Check if we should animate (more than 3 cards)
    const shouldAnimate = selected.length > 3;
    
    // Remove animation class if not needed
    const tickerContainer = ticker.parentElement;
    if (shouldAnimate) {
        ticker.classList.add('news-scroll');
        // Duplicate cards for smooth infinite scroll like partners
        const allCards = [...selected, ...selected];
        
        // Generate cards HTML
        ticker.innerHTML = allCards.map(newsItem => {
            const TEXT_LIMIT = 100; // Shorter limit for homepage cards
            const mainText = newsItem.mainText || '';
            const excerptText = mainText.length > TEXT_LIMIT ? mainText.substring(0, TEXT_LIMIT) + '...' : mainText;
            
            return `
                <article class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 flex-shrink-0" style="min-width: 320px; max-width: 340px;">
                    <img src="${newsItem.image}" alt="${newsItem.title}" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-2">${newsItem.title}</h3>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-3">${excerptText}</p>
                        <div class="text-xs text-gray-500">${formatDate(newsItem.date)}</div>
                    </div>
                </article>
            `;
        }).join('');
    } else {
        ticker.classList.remove('news-scroll');
        ticker.style.justifyContent = 'center';
        ticker.style.gap = '2rem';
        
        // Generate cards HTML without duplication
        ticker.innerHTML = selected.map(newsItem => {
            const TEXT_LIMIT = 100; // Shorter limit for homepage cards
            const mainText = newsItem.mainText || '';
            const excerptText = mainText.length > TEXT_LIMIT ? mainText.substring(0, TEXT_LIMIT) + '...' : mainText;
            
            return `
                <article class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 flex-shrink-0" style="min-width: 320px; max-width: 340px;">
                    <img src="${newsItem.image}" alt="${newsItem.title}" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-2">${newsItem.title}</h3>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-3">${excerptText}</p>
                        <div class="text-xs text-gray-500">${formatDate(newsItem.date)}</div>
                    </div>
                </article>
            `;
        }).join('');
    }
    } catch (error) {
        console.error('Error loading news for homepage:', error);
        ticker.innerHTML = `
            <div class="bg-white rounded-lg shadow-lg p-6 text-center flex-shrink-0" style="min-width: 320px;">
                <i class="fas fa-exclamation-triangle text-red-400 text-4xl mb-2"></i>
                <h3 class="text-lg font-bold text-red-800 mb-2">خطأ في تحميل الأخبار</h3>
                <p class="text-gray-600 text-sm">تعذر الاتصال بقاعدة البيانات</p>
            </div>
        `;
    }
})();

    // ========== SIMPLE CAROUSEL WITH DATABASE IMAGES (NO MOVEMENT) ==========
    async function loadCarouselFromDatabase() {
        try {
            const dbService = new DatabaseService();
            const images = await dbService.getAllCarouselImages();
            const activeImages = images.filter(img => img.is_active).sort((a, b) => a.sort_order - b.sort_order);
            
            const carousel = document.querySelector('.hero-carousel');
            const slidesContainer = carousel.querySelector('.hero-slide')?.parentNode || carousel;
            const dotsContainer = document.querySelector('.carousel-dots');
            
            // Clear existing slides and dots
            const existingSlides = carousel.querySelectorAll('.hero-slide');
            const existingDots = dotsContainer.querySelectorAll('.carousel-dot');
            existingSlides.forEach(slide => slide.remove());
            existingDots.forEach(dot => dot.remove());
            
            if (activeImages.length > 0) {
                // Mark that DB-driven carousel is active (used to enable auto-slide)
                window.DB_CAROUSEL_ACTIVE = true;
                // Create slides from database images
                activeImages.forEach((image, index) => {
                    const slide = document.createElement('div');
                    slide.className = `hero-slide ${index === 0 ? 'active' : ''}`;
                    slide.innerHTML = `<img src="${sanitizeHTML(image.image_url)}" alt="${sanitizeHTML(image.alt_text || 'صورة البطل')}" class="carousel-image">`;
                    carousel.insertBefore(slide, carousel.querySelector('.carousel-arrow'));
                    
                    const dot = document.createElement('button');
                    dot.className = `carousel-dot ${index === 0 ? 'active' : ''}`;
                    dot.setAttribute('data-slide', index);
                    dot.setAttribute('aria-label', `Slide ${index + 1}`);
                    dotsContainer.appendChild(dot);
                });
                // Images loaded successfully
            } else {
                // Fallback to default image if no active images in database
                window.DB_CAROUSEL_ACTIVE = true; // still DB-managed (single slide means no movement)
                const slide = document.createElement('div');
                slide.className = 'hero-slide active';
                slide.innerHTML = '<img src="assets/hdr-background.jpg" alt="صورة افتراضية" class="carousel-image">';
                carousel.insertBefore(slide, carousel.querySelector('.carousel-arrow'));
                
                const dot = document.createElement('button');
                dot.className = 'carousel-dot active';
                dot.setAttribute('data-slide', '0');
                dot.setAttribute('aria-label', 'Slide 1');
                dotsContainer.appendChild(dot);
                // Using default image
            }
            
            // Setup navigation after images are loaded
            setTimeout(() => {
                setupCarouselNavigation();
            }, 100); // Small delay to ensure DOM is updated
            
        } catch (error) {
            console.error('Error loading carousel images:', error);
            // Fallback: keep existing hardcoded images
        }
    }

    // Prefer database-driven carousel; fallback to manual slides if DB empty or fails
    (async function initCarousel() {
        try {
            await loadCarouselFromDatabase();
        } catch (e) {
            // Fallback to manual dots if DB not available
            const dotsContainer = document.querySelector('.carousel-dots');
            const slides = document.querySelectorAll('.hero-slide.manual-slide');
            if (!dotsContainer || slides.length === 0) return;
            dotsContainer.innerHTML = '';
            slides.forEach((_, index) => {
                const dot = document.createElement('button');
                dot.className = `carousel-dot ${index === 0 ? 'active' : ''}`;
                dot.setAttribute('data-slide', index.toString());
                dot.setAttribute('aria-label', `Slide ${index + 1}`);
                dotsContainer.appendChild(dot);
            });
            setTimeout(() => {
                setupCarouselNavigation();
            }, 50);
        }
    })();
    
    // ========== CAROUSEL NAVIGATION FUNCTIONS ==========
    let currentSlide = 0;
    let totalSlides = 0;
    let autoSlideInterval = null;
    let isAutoSliding = true;

    function showSlide(index, direction = 'next') {
        const slides = document.querySelectorAll('.hero-slide');
        const dots = document.querySelectorAll('.carousel-dot');
        
        if (slides.length === 0 || index === currentSlide) return;
        
        totalSlides = slides.length;
        const currentSlideElement = slides[currentSlide];
        const nextSlideElement = slides[index];
        const carousel = document.querySelector('.hero-carousel');

        // Lock container height during transition to avoid collapse/jump
        if (carousel) {
            const currentHeight = carousel.offsetHeight;
            if (currentHeight > 0) {
                carousel.style.height = currentHeight + 'px';
            }
        }
        
        // Force browser reflow to ensure consistent timing
        currentSlideElement?.offsetHeight;
        nextSlideElement?.offsetHeight;
        
        // Remove only transition classes; keep current 'active' until next is active
        slides.forEach(slide => {
            slide.classList.remove('slide-out-left', 'slide-out-right');
        });
        
        // Set initial positions before transition
        if (direction === 'next') {
            // Next slide starts from the right
            nextSlideElement?.classList.add('slide-out-right');
        } else {
            // Next slide starts from the left  
            nextSlideElement?.classList.add('slide-out-left');
        }
        
        // Force reflow to ensure initial position is set
        nextSlideElement?.offsetHeight;
        
        // Small delay to ensure consistent transition timing
        setTimeout(() => {
            // Apply transitions based on direction
            if (direction === 'next') {
                currentSlideElement?.classList.add('slide-out-left');
                nextSlideElement?.classList.remove('slide-out-right');
                nextSlideElement?.classList.add('active');
                // Now that next is active, remove active from previous
                currentSlideElement?.classList.remove('active');
            } else {
                currentSlideElement?.classList.add('slide-out-right');
                nextSlideElement?.classList.remove('slide-out-left');
                nextSlideElement?.classList.add('active');
                // Now that next is active, remove active from previous
                currentSlideElement?.classList.remove('active');
            }

            // Release height lock after transition completes
            if (carousel) {
                const release = () => {
                    carousel.style.height = '';
                    nextSlideElement?.removeEventListener('transitionend', release);
                };
                // Fallback: release after 700ms if transitionend isn't fired
                nextSlideElement?.addEventListener('transitionend', release, { once: true });
                setTimeout(release, 700);
            }
        }, 10); // Small delay for consistent timing
        
        // Update dots
        dots.forEach((dot, i) => {
            dot.classList.remove('active');
            if (i === index) {
                dot.classList.add('active');
            }
        });
        
        currentSlide = index;
    }

    function nextSlide() {
        const slides = document.querySelectorAll('.hero-slide');
        if (slides.length === 0) return;
        
        const next = (currentSlide + 1) % slides.length;
        showSlide(next, 'next');
    }

    function prevSlide() {
        const slides = document.querySelectorAll('.hero-slide');
        if (slides.length === 0) return;
        
        const prev = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(prev, 'prev');
    }

    // ========== AUTO-SLIDE FUNCTIONALITY ==========
    function startAutoSlide() {
        // Only enable auto-slide when DB-driven carousel is active
        if (!window.DB_CAROUSEL_ACTIVE) return;
        const slides = document.querySelectorAll('.hero-slide');
        if (slides.length <= 1) return; // nothing to slide

        // Clear any existing interval first
        if (autoSlideInterval) {
            clearInterval(autoSlideInterval);
            autoSlideInterval = null;
        }

        autoSlideInterval = setInterval(() => {
            if (isAutoSliding) {
                nextSlide();
            }
        }, 3000); // 3 seconds
    }

    function pauseAutoSlide() {
        isAutoSliding = false;
        if (autoSlideInterval) {
            clearInterval(autoSlideInterval);
            autoSlideInterval = null;
        }
    }

    function resumeAutoSlide() {
        if (!window.DB_CAROUSEL_ACTIVE) return;
        if (!isAutoSliding) {
            isAutoSliding = true;
            startAutoSlide();
        }
    }

    function restartAutoSlide() {
        if (!window.DB_CAROUSEL_ACTIVE) return;
        if (autoSlideInterval) {
            clearInterval(autoSlideInterval);
            autoSlideInterval = null;
        }
        isAutoSliding = true;
        startAutoSlide();
    }

    // ========== ARROW CLICK HANDLERS ==========
    function setupArrowHandlers() {
        const prevBtn = document.getElementById('prevSlide');
        const nextBtn = document.getElementById('nextSlide');
        
        // Left arrow goes to next slide (swipe right)
        prevBtn?.addEventListener('click', () => {
            nextSlide();
            // restartAutoSlide(); // Auto-slide disabled
        });
        
        // Right arrow goes to previous slide (swipe left)  
        nextBtn?.addEventListener('click', () => {
            prevSlide();
            // restartAutoSlide(); // Auto-slide disabled
        });
        
        // Arrow handlers active
    }

    // ========== DOT CLICK HANDLERS ==========
    function setupDotHandlers() {
        const dots = document.querySelectorAll('.carousel-dot');
        
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                const direction = index > currentSlide ? 'next' : 'prev';
                showSlide(index, direction);
                // restartAutoSlide(); // Auto-slide disabled
            });
        });
        
        // Dot handlers active
    }

    // ========== HOVER HANDLERS ==========
    function setupHoverHandlers() {
        const carousel = document.querySelector('.hero-carousel');
        if (!carousel) return;
        carousel.addEventListener('mouseenter', () => {
            pauseAutoSlide();
        });
        carousel.addEventListener('mouseleave', () => {
            resumeAutoSlide();
        });
    }

    // ========== TOUCH/SWIPE HANDLERS ==========
    function setupSwipeHandlers() {
        const carousel = document.querySelector('.hero-carousel');
        if (!carousel) return;
        
        let touchStartX = 0;
        let touchEndX = 0;
        let isDragging = false;
        let startTime = 0;
        let lastSwipeTime = 0; // Debounce rapid swipes
        
        // Touch events for mobile
        carousel.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
            startTime = Date.now();
            isDragging = true;
            pauseAutoSlide(); // Pause auto-slide during touch
        }, { passive: true });
        
        carousel.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            // Prevent default scrolling during swipe
            e.preventDefault();
        }, { passive: false });
        
        carousel.addEventListener('touchend', (e) => {
            if (!isDragging) return;
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
            isDragging = false;
            resumeAutoSlide();
        }, { passive: true });
        
        // Mouse events for desktop drag
        carousel.addEventListener('mousedown', (e) => {
            touchStartX = e.clientX;
            startTime = Date.now();
            isDragging = true;
            pauseAutoSlide();
            e.preventDefault(); // Prevent text selection
        });
        
        carousel.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
        });
        
        carousel.addEventListener('mouseup', (e) => {
            if (!isDragging) return;
            touchEndX = e.clientX;
            handleSwipe();
            isDragging = false;
            resumeAutoSlide();
        });
        
        carousel.addEventListener('mouseleave', () => {
            if (isDragging) {
                isDragging = false;
                // resumeAutoSlide(); // Auto-slide disabled
            }
        });
        
        function handleSwipe() {
            const swipeDistance = touchEndX - touchStartX;
            const swipeTime = Date.now() - startTime;
            const currentTime = Date.now();
            const minSwipeDistance = 50; // Minimum distance for swipe
            const maxSwipeTime = 500; // Maximum time for swipe (ms)
            const debounceTime = 300; // Minimum time between swipes (ms)
            
            // Debounce rapid swipes
            if (currentTime - lastSwipeTime < debounceTime) {
                // Swipe ignored - too rapid
                return;
            }
            
            // Check if it's a valid swipe
            if (Math.abs(swipeDistance) >= minSwipeDistance && swipeTime <= maxSwipeTime) {
                lastSwipeTime = currentTime;
                
                if (swipeDistance > 0) {
                    // Swiped right - go to next slide
                    nextSlide();
                } else {
                    // Swiped left - go to previous slide  
                    prevSlide();
                }
                
                // Delayed restart to prevent timer conflicts
                setTimeout(() => {
                    restartAutoSlide(); 
                }, 50);
            }
        }
        
        // Swipe handlers active
    }

    // ========== MAIN CAROUSEL SETUP ==========
    function setupCarouselNavigation() {
        const slides = document.querySelectorAll('.hero-slide');
        const dots = document.querySelectorAll('.carousel-dot');
        
        if (slides.length === 0) {
            // No slides found
            return;
        }
        
        // Set initial state
        currentSlide = 0;
        totalSlides = slides.length;
        
        setupArrowHandlers();
        setupDotHandlers();
        setupHoverHandlers();
        setupSwipeHandlers();
        
        startAutoSlide();
        
    }

    // ========== TIMELINE INTERACTIONS (Program Highlights) ==========
    (function setupTimelineInteractions(){
        const section = document.querySelector('#program-highlights');
        if (!section) return;
        const timeline = section.querySelector('.timeline');
        const items = Array.from(section.querySelectorAll('.timeline-item'));
        if (!timeline || !items.length) return;

        items.forEach((el, idx) => { el.dataset.index = String(idx); });

        const activate = (index) => {
            items.forEach(el => el.classList.remove('is-active'));
            const clamped = Math.max(0, Math.min(items.length - 1, index));
            items[clamped].classList.add('is-active');
        };

        let ticking = false;
        const onScroll = () => {
            if (ticking) return; ticking = true;
            requestAnimationFrame(() => {
                // Choose an anchor slightly above center so the user can see the line head while scrolling
                const center = window.innerHeight * 0.4; // 40% from top
                let bestIdx = 0; let bestDist = Infinity;
                items.forEach((el, i) => {
                    const r = el.getBoundingClientRect();
                    const mid = r.top + r.height / 2;
                    const d = Math.abs(mid - center);
                    if (d < bestDist) { bestDist = d; bestIdx = i; }
                });
                activate(bestIdx);

                // Continuous progress along the timeline (smooth roll)
                const tlRect = timeline.getBoundingClientRect();
                const viewportBottom = window.innerHeight;
                // Raise the visible head of the line above the bottom so it's not hidden
                const bottomOffset = 120; // px above bottom edge
                const viewportBottomAdj = viewportBottom - bottomOffset;
                // amount of timeline revealed in viewport (from top)
                const revealed = Math.min(Math.max(viewportBottomAdj - tlRect.top, 0), tlRect.height);
                const ratio = tlRect.height > 0 ? revealed / tlRect.height : 0;
                const pct = Math.max(0, Math.min(100, ratio * 100));
                timeline.style.setProperty('--tl-progress', pct + '%');
                ticking = false;
            });
        };

        // Initialize and bind
        activate(0);
        window.addEventListener('scroll', onScroll, { passive: true });
        window.addEventListener('resize', onScroll);
        // Trigger once in case user loads mid-page
        onScroll();
    })();

</script>
</body>
</html>